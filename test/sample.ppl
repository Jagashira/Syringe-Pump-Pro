; =========================================================
;  Complex two-drop dispensing program  (Pump Programming Language)
;  ─────────────────────────────────────────────────────────
;  1) 先行液滴 10 µL を 1 mL/hr で送液
;  2) 2 秒ポーズ
;  3) 後続液滴 15 µL を 0.5 mL/hr で送液
;  4) 10 回ループして合計 20 滴生成
; =========================================================

; ---------- 定数・初期設定 ----------
DIR INF           ; 送液方向を “INFuse” に
FIL               ; フィルモード（チューブ充填）
RAT 1.0 MM        ; デフォルト 1 mL/min
VOL 0.00          ; 体積クリア

; ---------- メインループ ----------
:MAIN_LOOP
LPS               ; ループ開始

    ; --- Phase 1 : 先行液滴 ------------------------------
    :LEADING
    RAT 1.0 MH    ; 1 mL/hr  (MH = mL/hr)
    VOL 0.010     ; 10 µL
    RUN           ; 実行
    PAS 2         ; 2 秒待機

    ; --- Phase 2 : 後続液滴 ------------------------------
    :FOLLOWING
    RAT 0.5 MH    ; 0.5 mL/hr
    VOL 0.015     ; 15 µL
    RUN

LPE               ; ループ終端
LOP 10            ; ↑を 10 回繰り返し (計 20 ドロップ)

; ---------- 追加デモ：条件分岐 & ジャンプ ---------------
:RAMP_TEST
VOL 0.005         ; 5 µL
RAT INC 0.2 MH    ; レートを 0.2 mL/hr ずつ加算
RUN
IF VOL > 0.100 JMP :CLEAN   ; 100 µL 超えたら洗浄へ

JMP :RAMP_TEST    ; 継続

; ---------- 洗浄シーケンス ------------------------------
:CLEAN
; パージ
DIR WDR           ; Withdraw（吸引）方向
RAT 2.0 MM
VOL 0.050
RUN

; 終了ブザー
BEP 3             ; Beep を 3 回鳴らす
STP               ; ポンプ停止
